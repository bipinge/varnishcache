# Generic rule to generate C code from VSC files. VSC files must be listed
# in the $(VSC_SRC) variable. The $(VSCTOOL) variable must point to the
# location of vsctool.py, normally set up by varnish.m4 at configure time.

VSC_GEN = $(VSC_SRC:.vsc=.c) $(VSC_SRC:.vsc=.h)

$(VSC_GEN): $(VSCTOOL)

.vsc.c:
	$(AM_V_GEN) $(PYTHON) $(VSCTOOL) -c $<

.vsc.h:
	$(AM_V_GEN) $(PYTHON) $(VSCTOOL) -h $<

clean-local: vsc-clean

vsc-clean:
	rm -f $(VSC_GEN)
